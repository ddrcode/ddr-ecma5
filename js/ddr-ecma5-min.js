/*  
 *  ddr-ECMA5 JavaScript library, version 1.2.1
 *  (c) 2010 David de Rosier
 *
 *  Licensed under the MIT license.
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Revision: 25
 *  Date: 04.08.2011
 */
(function(g,h){"use strict";var m={STRING_INDEX_ENUMERABLE:"abc".propertyIsEnumerable("1"),ACCESSORS:Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__,DOM:typeof window==='object'&&typeof document==='object'};var o=function(a,b){if(a.propertyIsEnumerable){return a.propertyIsEnumerable(b)}for(var c in a){if(c===b&&(a.hasOwnProperty?a.hasOwnProperty(b):true)){return true}}return false};Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!=='function')throw new TypeError("'this' is not a function");var b=this,args=q(arguments,1);return function(){return b.apply(a,args.concat(q(arguments)))}});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,'').replace(/\s\s*$/,'')});Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"||(a instanceof Array)});var p=Array.prototype;p.indexOf||(p.indexOf=function(a){var b=this.length,i=+arguments[1]||0;if(b===0||isNaN(i)||i>=b)return-1;if(i<0){i=b+i;i<0&&(i=0)}for(;i<b;++i){if(this.hasOwnProperty(String(i))&&this[i]===a)return i}return-1});p.lastIndexOf||(p.lastIndexOf=function(a){var b=this.length,i=+arguments[1]||b-1;if(b===0||isNaN(i))return-1;if(i<0){i=b+i}else if(i>=b){i=b-1}for(;i>=0;--i){if(this.hasOwnProperty(String(i))&&this[i]===a)return i}return-1});p.every||(p.every=function(a){if(!w(a))throw new TypeError(a+" is not a callable object");var b=arguments[1];for(var i=0,len=this.length;i<len;++i){if(this.hasOwnProperty(String(i))){if(!a.call(b,this[i],i,this))return false}}return true});p.some||(p.some=function(a){if(!w(a))throw new TypeError(a+" is not a callable object");var b=arguments[1];for(var i=0,len=this.length;i<len;++i){if(this.hasOwnProperty(String(i))){if(a.call(b,this[i],i,this))return true}}return false});p.forEach||(p.forEach=function(a){if(!w(a))throw new TypeError(a+" is not a callable object");var b=arguments[1];for(var i=0,len=this.length;i<len;++i){if(this.hasOwnProperty(String(i))){a.call(b,this[i],i,this)}}});p.map||(p.map=function(a){if(!w(a))throw new TypeError(a+" is not a callable object");var b=arguments[1],len=this.length,results=new Array(len);for(var i=0;i<len;++i){if(this.hasOwnProperty(String(i))){results[i]=a.call(b,this[i],i,this)}}return results});p.filter||(p.filter=function(a){if(!w(a))throw new TypeError(a+" is not a callable object");var b=arguments[1],len=this.length,results=[];for(var i=0;i<len;++i){if(this.hasOwnProperty(String(i))){a.call(b,this[i],i,this)&&results.push(this[i])}}return results});p.reduce||(p.reduce=function(a){if(!w(a))throw new TypeError(a+" is not a callable object");var b=this.length;if(b===0&&arguments.length<2)throw new TypeError("reduce of empty array with no initial value");var c=-1;if(arguments.length<2){if((c=u(this))===-1)throw new TypeError("reduce of empty array with no initial value");}var d=arguments.length>1?arguments[1]:this[c];for(var i=c+1;i<b;++i){if(this.hasOwnProperty(String(i))){d=a(d,this[i],i,this)}}return d});p.reduceRight||(p.reduceRight=function(a){if(!w(a))throw new TypeError(a+" is not a callable object");var b=this.length;if(b===0&&arguments.length<2)throw new TypeError("reduce of empty array with no initial value");var c=b;if(arguments.length<2){for(var k=b-1;k>=0;--k){if(this.hasOwnProperty(String(k))){c=k;break}}if(c===b)throw new TypeError("reduce of empty array with no initial value");}var d=arguments.length>1?arguments[1]:this[c];for(var i=c-1;i>=0;--i){if(this.hasOwnProperty(String(i))){d=a(d,this[i],i,this)}}return d});Date.now||(Date.now=function(){return+new Date});Date.prototype.toISOString||(Date.prototype.toISOString=(function(){var b=function(n,l){var a=String(n),len=l||2;while(a.length<len)a='0'+a;return a};return function(){return isFinite(this.getTime())?String(this.getUTCFullYear()).concat('-',b(this.getUTCMonth()+1),"-",b(this.getUTCDate()),"T",b(this.getUTCHours()),":",b(this.getUTCMinutes()),":",b(this.getUTCSeconds()),".",b(this.getUTCMilliseconds(),3),"Z"):'Invalid Date'}})());Date.prototype.toJSON||(Date.prototype.toJSON=function(a){if(!isFinite(this))return null;if(!this.toISOString||typeof this.toISOString!=='function')throw new TypeError("Date.prototype.toJSON called on incompatible "+(typeof this));return this.toISOString()});if(!Object.getPrototypeOf){if("".__proto__){Object.getPrototypeOf=function(a){if(!r(a))throw new TypeError(a+" is not an object");return a.__proto__}}else{Object.getPrototypeOf=function(a){if(!r(a))throw new TypeError(a+" is not an object");return a.constructor?a.constructor.prototype:null}}}Object.create||(Object.create=(function(){var d=function(){};return function(a,b){if(!r(a))throw new TypeError(a+" is not an object");d.prototype=a;var c=new d();b&&Object.defineProperties(c,b);return c}})());Object.isSealed||(Object.isSealed=function(a){if(!r(a))throw new TypeError(a+" is not an object");return false});Object.isFrozen||(Object.isFrozen=function(a){if(!r(a))throw new TypeError(a+" is not an object");return false});Object.isExtensible||(Object.isExtensible=function(a){if(!r(a))throw new TypeError(a+" is not an object");return true});Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=(function(){var d=['MAX_VALUE','MIN_VALUE','NaN','POSITIVE_INFINITY','NEGATIVE_INFINITY'],__MATH_CONSTS=['PI','E','LN2','LOG2E','LOG10E','SQRT1_2','SQRT2'];return function(a,b){if(!r(a))throw new TypeError(a+" is not an object");if(!(b in a))return;var c=true,configurable=true;if((a===Number&&d.indexOf(b)>=0)||(a===Math&&__MATH_CONSTS.indexOf(b)>=0)||(b=='length'&&(a===String.prototype||s(a)||a===Function.prototype||a instanceof Function))){c=false;configurable=false}else if(b=='length'&&(a===Array.prototype||Array.isArray(a))){configurable=false}return{writable:c,enumerable:o(a,b),configurable:configurable,value:a[b]}}})());(!Object.defineProperty||!Object.defineProperties)&&(function(){var f=function(a,b,c){if(a.hasOwnProperty("get")||a.hasOwnProperty("set")){throw new TypeError("Getters and setters are not supported by this ECMAScript engine");}else{a.writable=a.hasOwnProperty('writable')?a.writable:b;a.value=a.hasOwnProperty('value')?a.value:c}a.enumerable=a.hasOwnProperty('enumerable')?a.enumerable:b;a.configurable=a.hasOwnProperty('configurable')?a.configurable:b;var t=null;if((!a[t="configurable"])||(!a[t="enumerable"])||(!a[t="writable"])){throw new TypeError("Property '".concat(t,"' cannot be set to false in this version of ECMAScript engine"));}return a};if(!Object.defineProperty){Object.defineProperty=function(a,b,c){if(!r(a))throw new TypeError(a+" is not an object");var d=String(b);var e=v(c);e=f(e,a.hasOwnProperty(d),a[d]);a[d]=e.value;return a};Object.defineProperty.DDRECMA5=true}if(!Object.defineProperties){Object.defineProperties=function(a,b){if(!r(a))throw new TypeError(a+" is not an object");var b=Object(b);var c={};for(var d in b){if(b.hasOwnProperty(d)){var e=v(b[d]);c[d]=f(e,a.hasOwnProperty(d),a[d])}}for(d in c){if(b.hasOwnProperty(d)){a[d]=c[d].value}}return a};Object.defineProperties.DDRECMA5=true}})();Object.keys||(Object.keys=function(a){if(!r(a))throw new TypeError(a+" is not an object");var b=[];for(var c in a){(a.hasOwnProperty?a.hasOwnProperty(c):c in a)&&b.push(c)}if(s(a)&&!m.STRING_INDEX_ENUMERABLE){for(var i=0,len=a.length;i<len;++i){b.push(String(i))}}return b});!Object.getOwnPropertyNames&&(function(){var e=(function(){var d=[{object:Object,keys:['getOwnPropertyNames','seal','create','isFrozen','keys','isExtensible','getOwnPropertyDescriptor','preventExtensions','getPrototypeOf','defineProperty','isSealed','defineProperties','freeze']},{object:Object.prototype,keys:['toString','__lookupGetter__','__defineGetter__','toLocaleString','hasOwnProperty','valueOf','__defineSetter__','propertyIsEnumerable','isPrototypeOf','__lookupSetter__']},{object:Function.prototype,keys:['bind','arguments','toString','length','call','name','apply','caller']},{object:Number,keys:['NaN','NEGATIVE_INFINITY','POSITIVE_INFINITY','MAX_VALUE','MIN_VALUE']},{object:Number.prototype,keys:['toExponential','toString','toLocaleString','toPrecision','valueOf','toFixed']},{object:String,keys:['fromCharCode']},{object:String.prototype,keys:['length','concat','localeCompare','substring','italics','charCodeAt','strike','indexOf','toLowerCase','trimRight','toString','toLocaleLowerCase','replace','toUpperCase','fontsize','trim','split','substr','sub','charAt','blink','lastIndexOf','sup','fontcolor','valueOf','link','bold','anchor','trimLeft','small','search','fixed','big','match','toLocaleUpperCase','slice']},{object:Boolean.prototype,keys:['toString','valueOf']},{object:Date,keys:['now','UTC','parse']},{object:Date.prototype,keys:['toUTCString','setMinutes','setUTCMonth','getMilliseconds','getTime','getMinutes','getUTCHours','toString','setUTCFullYear','setMonth','getUTCMinutes','getUTCDate','setSeconds','toLocaleDateString','getMonth','toTimeString','toLocaleTimeString','setUTCMilliseconds','setYear','getUTCFullYear','getFullYear','getTimezoneOffset','setDate','getUTCMonth','getHours','toLocaleString','toISOString','toDateString','getUTCSeconds','valueOf','setUTCMinutes','getUTCDay','toJSON','setUTCDate','setUTCSeconds','getYear','getUTCMilliseconds','getDay','setFullYear','setMilliseconds','setTime','setHours','getSeconds','toGMTString','getDate','setUTCHours']},{object:RegExp,keys:['$*','$`','$input','$+','$&',"$'",'$_']},{object:RegExp.prototype,keys:['toString','exec','compile','test']},{object:Error.prototype,keys:['toString']},{object:Math,keys:['LN10','PI','E','LOG10E','SQRT2','LOG2E','SQRT1_2','LN2','cos','pow','log','tan','sqrt','ceil','asin','abs','max','exp','atan2','random','round','floor','acos','atan','min','sin']},{object:g,keys:['TypeError','decodeURI','parseFloat','Number','URIError','encodeURIComponent','RangeError','ReferenceError','RegExp','Array','isNaN','Date','Infinity','Boolean','Error','NaN','String','Function','Math','undefined','encodeURI','escape','unescape','decodeURIComponent','EvalError','SyntaxError','Object','eval','parseInt','JSON','isFinite']},{test:function(a){return typeof JSON!=='undefined'&&a===JSON},keys:['stringify','parse']},{test:function(a){return Array.isArray(a)||s(a)},keys:['length']},{test:function(a){return a instanceof RegExp},testValue:new RegExp('.+'),keys:['lastIndex','multiline','global','source','ignoreCase']},{test:function(a){return typeof a==='function'&&a.apply&&a.call},testValue:function(a,b,c){},keys:['arguments','length','name','prototype','caller']}];for(var i=0,ilen=d.length;i<ilen;++i){if(d[i].object){if(typeof d[i].object==='function'){d[i].keys.push('arguments','length','name','prototype','caller')}else if(typeof d[i].object==='object'&&d[i].object!==Math&&d[i].object!==g){d[i].keys.push('constructor')}for(var j=d[i].keys.length-1;j>=0;--j){if(!(d[i].keys[j]in d[i].object)||o(d[i].object,d[i].keys[j])){d[i].keys.splice(j,1)}}}else if(d[i].test&&d[i].testValue&&d[i].test(d[i].testValue)){for(var j=d[i].keys.length-1;j>=0;--j){if(!(d[i].keys[j]in d[i].testValue)||o(d[i].testValue,d[i].keys[j])){d[i].keys.splice(j,1)}}delete d[i].testValue}}return d})();var f=e.length;Object.getOwnPropertyNames=function(a){var b=Object.keys(a);for(var i=0;i<f;++i){if((e[i].object&&e[i].object===a)||(e[i].test&&e[i].test(a))){b=b.concat(e[i].keys);break}}return b}})();var q=function(a,b,c){var d=p.slice.call(arguments,1);return p.slice.apply(a,d)};var r=function(a){return a&&(typeof a==='object'||typeof a==='function')};var s=function(a){return typeof a==='string'||Object.prototype.toString.call(a)==='[object String]'};var u=function(a){for(var k=0,len=a.length;k<len;++k){if(a.hasOwnProperty(String(k))){return k}}return-1};var v=function(a){if(!a||typeof a!=='object')throw new TypeError(a+" is not an object");var b={};a.hasOwnProperty("enumerable")&&(b.enumerable=!!a.enumerable);a.hasOwnProperty("configurable")&&(b.configurable=!!a.configurable);a.hasOwnProperty("writable")&&(b.writable=!!a.writable);a.hasOwnProperty("value")&&(b.value=a.value);if(a.hasOwnProperty("get")){if(!w(a.get)&&typeof a.get!=='undefined')throw new TypeError("Getter must be a callable object");b.get=a.get}if(a.hasOwnProperty("set")){if(!w(a.set)&&typeof a.set!=='undefined')throw new TypeError("Setter must be a callable object");b.set=a.set}if((b.hasOwnProperty("get")||b.hasOwnProperty("set"))&&(b.hasOwnProperty("writable")||b.hasOwnProperty("value"))){throw new TypeError("Invalid property. A property cannot both have accessors and be writable or have a value");}return b};var w=(function(){var b=(function(){try{[].sort('abc');return false}catch(ex){return true}})();return function(a){if(typeof a==='function')return true;if(typeof a!=='object')return false;if(a instanceof Function||a instanceof RegExp)return true;if(b){try{[].sort(a);return true}catch(ex){}}return false}})()})(this);