/*  ddr-ECMA5 JavaScript library, version 1.2
 *  (c) 2010 David de Rosier
 *
 *  Licensed under the MIT license.
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Revision: 18
 *  Date: 18.07.2011
 */
(function(i){var m={STRING_INDEX_ENUMERABLE:"abc".propertyIsEnumerable("1"),ACCESSORS:Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__,DOM:typeof window==="object"&&typeof document==="object"};Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!=="function")throw new TypeError("'this' is not a function");var d=this,b=j(arguments,1);return function(){return d.apply(a,b.concat(j(arguments)))}});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/, "").replace(/\s\s*$/,"")});Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"||a instanceof Array});var e=Array.prototype;e.indexOf||(e.indexOf=function(a,d){var b=this.length,c=+d||0;if(b===0||isNaN(c)||c>=b)return-1;c<0&&(c=b+c,c<0&&(c=0));for(;c<b;++c)if(this.hasOwnProperty(String(c))&&this[c]===a)return c;return-1});e.lastIndexOf||(e.lastIndexOf=function(a,d){var b=this.length,c=+d||b-1;if(b===0||isNaN(c))return-1;for(c<0?c=b+c:c>=b&&(c=b-1);c>= 0;--c)if(this.hasOwnProperty(String(c))&&this[c]===a)return c;return-1});e.every||(e.every=function(a,d){if(typeof a!=="function")throw new TypeError(a+" is not a function");for(var b=0,c=this.length;b<c;++b)if(this.hasOwnProperty(String(b))&&!a.call(d,this[b],b,this))return!1;return!0});e.some||(e.some=function(a,d){if(typeof a!=="function")throw new TypeError(a+" is not a function");for(var b=0,c=this.length;b<c;++b)if(this.hasOwnProperty(String(b))&&a.call(d,this[b],b,this))return!0;return!1}); e.forEach||(e.forEach=function(a,d){if(typeof a!=="function")throw new TypeError(a+" is not a function");for(var b=0,c=this.length;b<c;++b)this.hasOwnProperty(String(b))&&a.call(d,this[b],b,this)});e.map||(e.map=function(a,d){if(typeof a!=="function")throw new TypeError(a+" is not a function");for(var b=this.length,c=Array(b),f=0;f<b;++f)this.hasOwnProperty(String(f))&&(c[f]=a.call(d,this[f],f,this));return c});e.filter||(e.filter=function(a,d){if(typeof a!=="function")throw new TypeError(a+" is not a function"); for(var b=this.length,c=[],f=0;f<b;++f)this.hasOwnProperty(String(f))&&a.call(d,this[f],f,this)&&c.push(this[f]);return c});e.reduce||(e.reduce=function(a){if(typeof a!=="function")throw new TypeError(a+" is not a function");var d=this.length;if(d===0&&arguments.length<2)throw new TypeError("reduce of empty array with no initial value");var b=-1,c;if(c=arguments.length<2){a:{b=0;for(c=this.length;b<c;++b)if(this.hasOwnProperty(String(b)))break a;b=-1}c=b===-1}if(c)throw new TypeError("reduce of empty array with no initial value"); c=arguments.length>1?arguments[1]:this[b];for(b+=1;b<d;++b)this.hasOwnProperty(String(b))&&(c=a(c,this[b],b,this));return c});e.reduceRight||(e.reduceRight=function(a){if(typeof a!=="function")throw new TypeError(a+" is not a function");var d=this.length;if(d===0&&arguments.length<2)throw new TypeError("reduce of empty array with no initial value");var b=d;if(arguments.length<2){for(var c=d-1;c>=0;--c)if(this.hasOwnProperty(String(c))){b=c;break}if(b===d)throw new TypeError("reduce of empty array with no initial value"); }d=arguments.length>1?arguments[1]:this[b];for(b-=1;b>=0;--b)this.hasOwnProperty(String(b))&&(d=a(d,this[b],b,this));return d});Date.now||(Date.now=function(){return+new Date});Date.prototype.toISOString||(Date.prototype.toISOString=function(){var a=function(a,b){for(var c=String(a),f=b||2;c.length<f;)c="0"+c;return c};return function(){return isFinite(this.getTime())?String(this.getUTCFullYear()).concat("-",a(this.getUTCMonth()+1),"-",a(this.getUTCDate()),"T",a(this.getUTCHours()),":",a(this.getUTCMinutes()), ":",a(this.getUTCSeconds()),".",a(this.getUTCMilliseconds(),3),"Z"):"Invalid Date"}}());Date.prototype.toJSON||(Date.prototype.toJSON=function(){if(!isFinite(this))return null;if(!this.toISOString||typeof this.toISOString!=="function")throw new TypeError("Date.prototype.toJSON called on incompatible "+typeof this);return this.toISOString()});if(!Object.getPrototypeOf)Object.getPrototypeOf="".__proto__?function(a){if(!g(a))throw new TypeError(a+" is not an object");return a.__proto__}:function(a){if(!g(a))throw new TypeError(a+ " is not an object");return a.constructor?a.constructor.prototype:null};Object.create||(Object.create=function(){var a=function(){};return function(d,b){if(!g(d))throw new TypeError(d+" is not an object");a.prototype=d;var c=new a;b&&Object.defineProperties(c,b);return c}}());Object.isSealed||(Object.isSealed=function(a){if(!g(a))throw new TypeError(a+" is not an object");return!1});Object.isFrozen||(Object.isFrozen=function(a){if(!g(a))throw new TypeError(a+" is not an object");return!1});Object.isExtensible|| (Object.isExtensible=function(a){if(!g(a))throw new TypeError(a+" is not an object");return!0});Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(){var a=["MAX_VALUE","MIN_VALUE","NaN","POSITIVE_INFINITY","NEGATIVE_INFINITY"],d=["PI","E","LN2","LOG2E","LOG10E","SQRT1_2","SQRT2"];return function(b,c){if(!g(b))throw new TypeError(b+" is not an object");if(c in b){var f=!0,e=!0;if(b===Number&&a.indexOf(c)>=0||b===Math&&d.indexOf(c)>=0||c=="length"&&(b===String.prototype||h(b)|| b===Function.prototype||b instanceof Function))e=f=!1;else if(c=="length"&&(b===Array.prototype||Array.isArray(b)))e=!1;return{writable:f,enumerable:b.propertyIsEnumerable?b.propertyIsEnumerable(c):!0,configurable:e,value:b[c]}}}}());(!Object.defineProperty||!Object.defineProperties)&&function(){var a=function(a,b,c){if(a.hasOwnProperty("get")||a.hasOwnProperty("set"))throw new TypeError("Getters and setters are not supported by this ECMAScript engine");else a.writable=a.hasOwnProperty("writable")? a.writable:b,a.value=a.hasOwnProperty("value")?a.value:c;a.enumerable=a.hasOwnProperty("enumerable")?a.enumerable:b;a.configurable=a.hasOwnProperty("configurable")?a.configurable:b;b=null;if(!a[b="configurable"]||!a[b="enumerable"]||!a[b="writable"])throw new TypeError("Property '".concat(b,"' cannot be set to false in this version of ECMAScript engine"));return a};if(!Object.defineProperty)Object.defineProperty=function(d,b,c){if(!g(d))throw new TypeError(d+" is not an object");b=String(b);c=k(c); c=a(c,d.hasOwnProperty(b),d[b]);d[b]=c.value;return d},Object.defineProperty.DDRECMA5=!0;if(!Object.defineProperties)Object.defineProperties=function(d,b){if(!g(d))throw new TypeError(d+" is not an object");var b=Object(b),c={},f;for(f in b)if(b.hasOwnProperty(f)){var e=k(b[f]);c[f]=a(e,d.hasOwnProperty(f),d[f])}for(f in c)if(b.hasOwnProperty(f))d[f]=c[f].value;return d},Object.defineProperties.DDRECMA5=!0}();Object.keys||(Object.keys=function(a){if(!g(a))throw new TypeError(a+" is not an object"); var d=[],b;for(b in a)a.hasOwnProperty(b)&&d.push(b);if(h(a)&&!m.STRING_INDEX_ENUMERABLE){b=0;for(a=a.length;b<a;++b)d.push(String(b))}return d});!Object.getOwnPropertyNames&&function(){var a=function(){for(var b=[{object:Object,keys:["getOwnPropertyNames","seal","create","isFrozen","keys","isExtensible","getOwnPropertyDescriptor","preventExtensions","getPrototypeOf","defineProperty","isSealed","defineProperties","freeze"]},{object:Object.prototype,keys:["toString","__lookupGetter__","__defineGetter__", "toLocaleString","hasOwnProperty","valueOf","__defineSetter__","propertyIsEnumerable","isPrototypeOf","__lookupSetter__"]},{object:Function.prototype,keys:["bind","arguments","toString","length","call","name","apply","caller"]},{object:Number,keys:["NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","MAX_VALUE","MIN_VALUE"]},{object:Number.prototype,keys:["toExponential","toString","toLocaleString","toPrecision","valueOf","toFixed"]},{object:String,keys:["fromCharCode"]},{object:String.prototype,keys:["length", "concat","localeCompare","substring","italics","charCodeAt","strike","indexOf","toLowerCase","trimRight","toString","toLocaleLowerCase","replace","toUpperCase","fontsize","trim","split","substr","sub","charAt","blink","lastIndexOf","sup","fontcolor","valueOf","link","bold","anchor","trimLeft","small","search","fixed","big","match","toLocaleUpperCase","slice"]},{object:Boolean.prototype,keys:["toString","valueOf"]},{object:Date,keys:["now","UTC","parse"]},{object:Date.prototype,keys:["toUTCString", "setMinutes","setUTCMonth","getMilliseconds","getTime","getMinutes","getUTCHours","toString","setUTCFullYear","setMonth","getUTCMinutes","getUTCDate","setSeconds","toLocaleDateString","getMonth","toTimeString","toLocaleTimeString","setUTCMilliseconds","setYear","getUTCFullYear","getFullYear","getTimezoneOffset","setDate","getUTCMonth","getHours","toLocaleString","toISOString","toDateString","getUTCSeconds","valueOf","setUTCMinutes","getUTCDay","toJSON","setUTCDate","setUTCSeconds","getYear","getUTCMilliseconds", "getDay","setFullYear","setMilliseconds","setTime","setHours","getSeconds","toGMTString","getDate","setUTCHours"]},{object:RegExp,keys:["$*","$`","$input","$+","$&","$'","$_"]},{object:RegExp.prototype,keys:["toString","exec","compile","test"]},{object:Error.prototype,keys:["toString"]},{object:Math,keys:["LN10","PI","E","LOG10E","SQRT2","LOG2E","SQRT1_2","LN2","cos","pow","log","tan","sqrt","ceil","asin","abs","max","exp","atan2","random","round","floor","acos","atan","min","sin"]},{object:i,keys:["TypeError", "decodeURI","parseFloat","Number","URIError","encodeURIComponent","RangeError","ReferenceError","RegExp","Array","isNaN","Date","Infinity","Boolean","Error","NaN","execScript","String","Function","Math","undefined","encodeURI","escape","unescape","decodeURIComponent","EvalError","SyntaxError","Object","eval","parseInt","JSON","isFinite"]},{test:function(a){return typeof JSON!=="undefined"&&a===JSON},keys:["stringify","parse"]},{test:function(a){return Array.isArray(a)||h(a)},keys:["length"]},{test:function(a){return a instanceof RegExp},testValue:/.+/,keys:["lastIndex","multiline","global","source","ignoreCase"]},{test:function(a){return typeof a==="function"&&a.apply&&a.call},testValue:function(){},keys:["arguments","length","name","prototype","caller"]}],a=0,d=b.length;a<d;++a)if(b[a].object){typeof b[a].object==="function"?b[a].keys.push("arguments","length","name","prototype","caller"):typeof b[a].object==="object"&&b[a].object!==Math&&b[a].object!==i&&b[a].keys.push("constructor");for(var e=b[a].keys.length-1;e>=0;--e)(!(b[a].keys[e]in b[a].object)||b[a].object.propertyIsEnumerable(b[a].keys[e]))&&b[a].keys.splice(e,1)}else if(b[a].test&&b[a].testValue&&b[a].test(b[a].testValue)){for(e=b[a].keys.length-1;e>=0;--e)(!(b[a].keys[e]in b[a].testValue)||b[a].testValue.propertyIsEnumerable(b[a].keys[e]))&&b[a].keys.splice(e,1);delete b[a].testValue}return b}(),d=a.length;Object.getOwnPropertyNames=function(b){for(var c=Object.keys(b),e=0;e<d;++e)if(a[e].object&&a[e].object===b||a[e].test&&a[e].test(b)){c=c.concat(a[e].keys);break}return c}}(); var j=function(a){var d=e.slice.call(arguments,1);return e.slice.apply(a,d)},g=function(a){return a&&(typeof a==="object"||typeof a==="function")},h=function(a){return typeof a==="string"||Object.prototype.toString.call(a)==="[object String]"},k=function(a){if(!a||typeof a!=="object")throw new TypeError(a+" is not an object");var d={};a.hasOwnProperty("enumerable")&&(d.enumerable=!!a.enumerable);a.hasOwnProperty("configurable")&&(d.configurable=!!a.configurable);a.hasOwnProperty("writable")&&(d.writable= !!a.writable);a.hasOwnProperty("value")&&(d.value=a.value);if(a.hasOwnProperty("get")){if(!l(a.get)&&typeof a.get!=="undefined")throw new TypeError("Getter must be a callable object");d.get=a.get}if(a.hasOwnProperty("set")){if(!l(a.set)&&typeof a.set!=="undefined")throw new TypeError("Setter must be a callable object");d.set=a.set}if((d.hasOwnProperty("get")||d.hasOwnProperty("set"))&&(d.hasOwnProperty("writable")||d.hasOwnProperty("value")))throw new TypeError("Invalid property. A property cannot both have accessors and be writable or have a value"); return d},l=function(){var a;try{[].sort("abc"),a=!1}catch(d){a=!0}return function(b){if(typeof b==="function")return!0;if(typeof b!=="object")return!1;if(b instanceof Function||b instanceof RegExp)return!0;if(a)try{return[].sort(b),!0}catch(c){}return!1}}()})(this);